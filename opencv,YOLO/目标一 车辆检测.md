## 创建和显示窗口
### namedWindow ()
创建窗口, 参数为: (窗口名, 窗口模式); 默认 auto 不可调大小, normal 可调大小
### imshow ()
显示窗口, 只有在创建窗口后才有效, 参数为: (窗口名, Mat 内容 (填 0 为全黑))
### destoryAllWindows ()
销毁窗口, 关闭所有窗口, 释放内存
### resizeWindow ()
调整窗口大小, 参数为: (窗口名, 设定宽度, 设定高度)
### waiteKey ()
窗口等待, 只有设定才会等待操作, 可传回按键监听值, 填 0 为一直等候

```python
import cv2

# 创建窗口

cv2.namedWindow('new', cv2.WINDOW_NORMAL)

# 显示窗口

cv2.imshow('new', 0)

# 调整窗口大小

cv2.resizeWindow('new', 1920, 1080)

while True:

    # 等待按键

    key = cv2.waitKey(0)

    if(key & 0xFF == ord('q')):

        break

# 销毁窗口

cv2.destroyAllWindows()
```

## 加载图片
### imread (path, flag) 
加载图片为 mat 类型数据, 参数为: (图片地址, 色彩类型 (可选彩色, 黑白 ,etc))
```python
import cv2

# 创建窗口

cv2.namedWindow('img', cv2.WINDOW_NORMAL)

# 读取图片

img = cv2.imread('40919163221.jpg')

# 显示窗口

cv2.imshow('img', img)

while True:

    # 等待按键

    key = cv2.waitKey(0)

    if(key & 0xFF == ord('q')):

        break

# 销毁窗口

cv2.destroyAllWindows()
```

> [!NOTE] 注意
> 使用key & 0xFF == ord('q') 而非'q', 因为按键读取为 ASCII 码, 需转换为 ASCII 码, 读取为整形, 所以使用& 0 xFF 读取最后四位与'q'匹配

## 保存图片
### imwrite (name, img)
name, 要保存的文件名
Img, 是 Mat 类型
```python
import cv2

# 创建窗口

cv2.namedWindow('img', cv2.WINDOW_NORMAL)

# 读取图片

img = cv2.imread('40919163221.jpg')

# 显示窗口

cv2.imshow('img', img)

while True:

    # 等待按键

    key = cv2.waitKey(0)

    if(key & 0xFF == ord('q')):

        break

    elif(key & 0xFF == ord('s')):

        # 保存图片

        cv2.imwrite('40919163221_copy.png', img)

# 销毁窗口

cv2.destroyAllWindows()
```

> [!NOTE] 注意
> 使用 while true 循环, 避免其他按键检测后退出, 保证只有 q 键退出

## 视频采集
### VideoCapure ()
参数为: (视频设备的索引值, 视频api (默认自动检测为 0))
### cap. read ()
返回两个值, 第一个为状态值, 读到帧为 true
第二个值为视频帧
### cap. release
释放视频帧
```python
import cv2


#创建窗口

cv2.namedWindow("video", cv2.WINDOW_NORMAL)

#设置窗口大小

cv2.resizeWindow("video", 640, 480)

#打开视频文件

cap = cv2.VideoCapture(0)

#循环读取视频帧

while True:

    #读取视频文件

    ret, frame = cap.read()

    #显示视频

    if ret:

        #显示视频

        cv2.imshow("video", frame)

        #waitKey()函数用于延时，单位是毫秒，参数为0时表示无限等待，参数为1时表示等待1毫秒，按下任意键退出循环

        if cv2.waitKey(1) & 0xFF == ord('q'):

            #按q键退出循环

            break

#释放资源

cap.release()

cv2.destroyAllWindows()
```
## 视频录制
### VideoWriter
参数一为输出文件
参数二为多媒体文化格式 (VideoWriter_fourcc)
参数三为帧率
参数四为分辨率大小

> [!NOTE] 注意
> 视频分辨率应和摄像头分辨率一致才能正常运行

### write
向视频文件中写入内容
### release
释放视频文件
```python
import cv2

#创建视频文件writer

#设置编码格式

fourcc = cv2.VideoWriter_fourcc(*'MJPG')

#设置视频尺寸

vw = cv2.VideoWriter('./output.mp4', fourcc, 25, (1280, 720))

  
  

#创建窗口

cv2.namedWindow("video", cv2.WINDOW_NORMAL)

#设置窗口大小

cv2.resizeWindow("video", 640, 480)

#打开视频文件

cap = cv2.VideoCapture(0)

#循环读取视频帧

while True:

    #读取视频文件

    ret, frame = cap.read()

    #显示视频

    if ret:

        #显示视频

        cv2.imshow("video", frame)

        #写入视频文件

        vw.write(frame)

        #waitKey()函数用于延时，单位是毫秒，参数为0时表示无限等待，参数为1时表示等待1毫秒，按下任意键退出循环

        if cv2.waitKey(1) & 0xFF == ord('q'):

            #按q键退出循环

            break

#释放资源

cap.release()

#释放视频文件

vw.release()

#关闭所有窗口

cv2.destroyAllWindows()
```
## 代码优化
```python
import cv2

#创建视频文件writer

#设置编码格式

fourcc = cv2.VideoWriter_fourcc(*'MJPG')

#设置视频尺寸

vw = cv2.VideoWriter('./output.mp4', fourcc, 25, (1280, 720))

  
  

#创建窗口

cv2.namedWindow("video", cv2.WINDOW_NORMAL)

#设置窗口大小

cv2.resizeWindow("video", 640, 480)

#打开视频文件

cap = cv2.VideoCapture(0)

#循环读取视频帧

#按q键退出循环

#使用cap.isOpened()函数判断视频文件是否打开成功

while cap.isOpened():

    #读取视频文件

    ret, frame = cap.read()

    #判断视频文件是否读取成功    

    if ret:

        #显示视频

        cv2.imshow("video", frame)

        #再次设置窗口大小防止窗口大小改变

        cv2.resizeWindow("video", 640, 480)

        #写入视频文件

        vw.write(frame)

        #waitKey()函数用于延时，单位是毫秒，参数为0时表示无限等待，参数为1时表示等待1毫秒，按下任意键退出循环

        if cv2.waitKey(1) & 0xFF == ord('q'):

            #按q键退出循环

            break

    else:

        #视频文件播放完毕

        break

#释放资源

cap.release()

#释放视频文件

vw.release()

#关闭所有窗口

cv2.destroyAllWindows()
```
- 显示窗口为什么变大了
#使用cap .isOpened()函数判断视频文件是否打开成功 while cap.isOpened():
- 使用 isOpened () 判断摄像头是否已经打开
#再次设置窗口大小防止窗口大小改变 cv2.resizeWindow("video", 640, 480)
- 采集数据时要判断数据是否获取到了
#判断视频文件是否读取成功  if ret:
## OpenCV 鼠标控制
